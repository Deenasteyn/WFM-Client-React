(this["webpackJsonpwfm-skeleton-tsx"]=this["webpackJsonpwfm-skeleton-tsx"]||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(18),r=a.n(s),o=(a(51),a(52),a(29)),l=a(6),j=a(17),i=a(46),b=a(15),d=a(13),u=a(16),p=a(1),O=function(){return localStorage.clear(),Object(p.jsxs)("a",{href:"/login",className:"btn btn-default btn-sm",children:[Object(p.jsx)("span",{className:"fa fa-sign-out"})," Log out"]})},m=a(25),h=(a(32),a(58),function(e){var t=e.employeeData,a=e.getEmployee,c=e.updatelockstatus;Object(n.useEffect)((function(){a()}),[]);var s=Object(n.useState)(""),r=Object(u.a)(s,2),o=r[0],l=r[1];return console.log(t),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Managers Home"}),Object(p.jsx)(O,{}),Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Experience"}),Object(p.jsx)("th",{children:"Skills"}),Object(p.jsx)("th",{children:"Manager"})]},"2342")}),Object(p.jsx)("tbody",{children:t.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e.Name}),Object(p.jsx)("td",{children:e.Experience}),Object(p.jsx)("td",{children:e.Skills}),Object(p.jsx)("td",{children:e.Manager}),Object(p.jsx)("td",{children:Object(p.jsx)(m.a,{trigger:Object(p.jsxs)("button",{className:"btn btn-primary",children:[Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-lock-fill",viewBox:"0 0 16 16",children:Object(p.jsx)("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"})})," Request Lock "]}),modal:!0,children:function(t){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsxs)("div",{className:"modal-header",children:[Object(p.jsx)("h5",{className:"modal-title",id:"exampleModalLongTitle",children:"SOFT LOCK REQUEST CONFIRMATION"}),Object(p.jsx)("button",{className:"close",onClick:t})]}),Object(p.jsxs)("div",{className:"modal-body",children:["Please confirm the lock request for ",Object(p.jsx)("b",{children:e.Name}),Object(p.jsx)("br",{}),"Request Message(Message must be 10 char long)",Object(p.jsx)("br",{}),Object(p.jsx)("input",{value:o,name:"reqmessage",onChange:function(e){l(e.target.value)}}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{className:"modal-footer",children:[Object(p.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){t()},children:"Close"}),Object(p.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){c(e.EmployeeId,o)},children:"Send Request"})]})]})]})})}})})]},e.EmployeeId)}))})]})]})}),x=Object(b.b)((function(e){return{employeeData:e.employeeData.employeeData}}),(function(e){return Object(d.b)({getEmployee:function(){return{type:"Action"}},updatelockstatus:function(e,t){return console.log("called hoc"),console.log(e),{type:"Update",data:{employee_id:e,message:t}}}},e)}))(h),g=function(e){var t=e.employeeRequestData,a=e.getEmployeeRequest,c=e.updateEmployeeStatus;Object(n.useEffect)((function(){a()}),[]);var s=Object(n.useState)(""),r=Object(u.a)(s,2),o=r[0],l=r[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"WFM Home"}),Object(p.jsx)(O,{}),Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Employee ID"}),Object(p.jsx)("th",{children:"Requestee"}),Object(p.jsx)("th",{children:"Requested Date"}),Object(p.jsx)("th",{children:"WFM Manager"})]})}),Object(p.jsx)("tbody",{children:t.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e.EmployeeId}),Object(p.jsx)("td",{children:e.Manager}),Object(p.jsx)("td",{children:e.ReqDate}),Object(p.jsx)("td",{children:e.wfm_manager}),Object(p.jsx)("td",{children:Object(p.jsx)(m.a,{trigger:Object(p.jsxs)("button",{className:"btn btn-primary",children:[Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-lock-fill",viewBox:"0 0 16 16",children:Object(p.jsx)("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"})})," Request Lock "]}),modal:!0,children:Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsx)("div",{className:"modal-header",children:Object(p.jsx)("h5",{className:"modal-title",id:"exampleModalLongTitle",children:"SOFT LOCK REQUEST CONFIRMATION"})}),Object(p.jsxs)("div",{className:"modal-body",children:[Object(p.jsx)("p",{children:"Employee ID"}),e.EmployeeId,Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"Requestee"}),e.Manager,Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"Employee Manager"}),e.wfm_manager,Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"Request Description"}),e.ReqMessage,Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"Status"}),"   ",o,Object(p.jsxs)("select",{onChange:function(e){l(e.target.value)},children:[Object(p.jsx)("option",{},0),Object(p.jsx)("option",{children:"Approve"},1),Object(p.jsx)("option",{children:"Reject"},2)]}),Object(p.jsxs)("div",{className:"modal-footer",children:[Object(p.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),Object(p.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){c(e.EmployeeId,o)},children:"Send Request"})]})]})]})})})})]},e.EmployeeId)}))})]})]})},y=Object(b.b)((function(e){return{employeeRequestData:e.employeeRequestData.employeeRequestData}}),(function(e){return Object(d.b)({getEmployeeRequest:function(){return{type:"Wfm_Action"}},updateEmployeeStatus:function(e,t){return console.log(e,t),{type:"UpdateEmployeeRequest",data:{employee_id:e,status:t}}}},e)}))(g),f=["children"],v=function(e){e.children;var t=Object(i.a)(e,f),a=localStorage.getItem("token"),n=localStorage.getItem("usertype");return console.log(a,"token"),Object(p.jsx)(l.b,Object(j.a)(Object(j.a)({},t),{},{render:function(e){var t=e.location;return a?"manager"===n?Object(p.jsx)(x,{}):Object(p.jsx)(y,{}):Object(p.jsx)(l.a,{to:{pathname:"/login",state:{from:t}}})}}))},E=function(e){var t=e.performLogin,a=Object(n.useState)(""),c=Object(u.a)(a,2),s=c[0],r=c[1],o=Object(n.useState)(""),j=Object(u.a)(o,2),i=j[0],b=j[1];return console.log("Karthika G"),console.log(localStorage.getItem("token"),"Abi token"),localStorage.getItem("token")?(console.log("Rendereeeeeddddddddd"),Object(p.jsx)(l.a,{to:"/home"})):Object(p.jsxs)("div",{className:"card",style:{width:"400px",minHeight:"300px",position:"relative",top:"100px",left:"35%",padding:"20px",color:"darkblue"},children:[Object(p.jsx)("h3",{children:" Work Force Management "}),Object(p.jsxs)("form",{action:"/action_page.php",children:[Object(p.jsx)("div",{className:"mb-3 mt-3",children:Object(p.jsx)("input",{type:"text",className:"form-control",value:s,placeholder:"username",onChange:function(e){return r(e.target.value)}})}),Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsx)("input",{type:"password",className:"form-control",value:i,onChange:function(e){return b(e.target.value)},placeholder:"password",name:"pswd"})}),Object(p.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return t({username:s,password:i})},children:"Login"})]})]})},N=Object(b.b)((function(e){return{token:e.loginData.token,usertype:e.loginData.usertype,username:e.loginData.username}}),(function(e){return Object(d.b)({performLogin:function(e){return{type:"LOGIN_ACTION",data:e}}},e)}))(E),k=function(){return Object(p.jsx)(o.a,{children:Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{path:"/login",children:Object(p.jsx)(N,{})}),Object(p.jsx)(l.b,{exact:!0,path:"/home",children:Object(p.jsx)(v,{})}),Object(p.jsx)(l.b,{path:"*",children:Object(p.jsx)(l.a,{exact:!0,from:"/",to:"home"})})]})})},I=(a(61),a(62),a(45)),R=a(14),S=a.n(R),L=a(7),w=a(20),D=a.n(w),A=S.a.mark(M),q=S.a.mark(_),C=S.a.mark(U);function M(e){var t;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(L.a)(D.a.post,"http://localhost:8000/users/signin",e.data);case 3:return t=a.sent,console.log(t.data),localStorage.setItem("username",t.data.username),localStorage.setItem("usertype",t.data.usertype),localStorage.setItem("token",t.data.token),a.next=10,Object(L.b)({type:"LOGIN_SUCCESS",data:{username:t.data.username,usertype:t.data.usertype,token:t.data.token}});case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(0),a.next=16,Object(L.b)({type:"LOGIN_FAILURE"});case 16:case"end":return a.stop()}}),A,null,[[0,12]])}function _(e){var t,a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("Called here"),"Update"!==e.type){n.next=15;break}return console.log("EmployeeId"),console.log(e),n.prev=4,n.next=7,Object(L.a)(D.a.post,"http://localhost:8000/users/updateStatus",{employee_id:e.data.employee_id,requestmessage:e.data.message});case 7:t=n.sent,console.log(t),n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(4),n.next=15,Object(L.b)({type:"FAILURE"});case 15:if("Action"!==e.type){n.next=30;break}return n.prev=16,console.log(localStorage.getItem("usertype")),n.next=20,Object(L.a)(D.a.get,"http://localhost:8000/users/manager",{manager:localStorage.getItem("username")});case 20:return a=n.sent,console.log(a.data),n.next=24,Object(L.b)({type:"LOAD_EMPLOYEE",data:a.data});case 24:n.next=30;break;case 26:return n.prev=26,n.t1=n.catch(16),n.next=30,Object(L.b)({type:"FAILURE"});case 30:case"end":return n.stop()}}),q,null,[[4,11],[16,26]])}function U(e){var t,a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("Called here 60"),"Wfm_Action"!==e.type){n.next=15;break}return n.prev=2,n.next=5,Object(L.a)(D.a.get,"http://localhost:8000/users/wfm_manager");case 5:return t=n.sent,console.log(t.data),n.next=9,Object(L.b)({type:"LOAD_EMPLOYEEREQUEST",data:t.data});case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(2),n.next=15,Object(L.b)({type:"FAILURE"});case 15:if("UpdateEmployeeRequest"!==e.type){n.next=31;break}return console.log("EmployeeId"),console.log(e),n.prev=18,n.next=21,Object(L.a)(D.a.post,"http://localhost:8000/users/updateApprovalStatus",{employee_id:e.data.employee_id,status:e.data.status});case 21:return a=n.sent,console.log(a),n.next=25,Object(L.b)({type:"LOAD_EMPLOYEEREQUEST",data:a.data});case 25:n.next=31;break;case 27:return n.prev=27,n.t1=n.catch(18),n.next=31,Object(L.b)({type:"FAILURE"});case 31:case"end":return n.stop()}}),C,null,[[2,11],[18,27]])}var F=S.a.mark(T);function T(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.c)("LOGIN_ACTION",M);case 2:return e.next=4,Object(L.c)("Action",_);case 4:return e.next=6,Object(L.c)("Update",_);case 6:return e.next=8,Object(L.c)("Wfm_Action",U);case 8:return e.next=10,Object(L.c)("UpdateEmployeeRequest",U);case 10:case"end":return e.stop()}}),F)}var G=Object(d.c)({loginData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"NA",token:"NA",usertype:"NA"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return console.log("Logiin_success"),console.log(t.data),Object(j.a)({},t.data);case"LOGIN_FAILURE":return console.log(t),Object(j.a)(Object(j.a)({},e),{},{message:"Login Credentials incorrect"});default:return e}},employeeData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{employeeData:[]},t=arguments.length>1?arguments[1]:void 0;return"LOAD_EMPLOYEE"===t.type?{employeeData:t.data}:e},employeeRequestData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{employeeRequestData:[]},t=arguments.length>1?arguments[1]:void 0;return"LOAD_EMPLOYEEREQUEST"===t.type?{employeeRequestData:t.data}:e}}),P=Object(I.a)(),V=Object(d.e)(G,Object(d.a)(P));P.run(T),r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(b.a,{store:V,children:Object(p.jsx)(k,{})})}),document.getElementById("root"))},51:function(e,t,a){},52:function(e,t,a){},58:function(e,t,a){}},[[104,1,2]]]);
//# sourceMappingURL=main.e45af13e.chunk.js.map